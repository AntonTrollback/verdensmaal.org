var html = require('choo/html')
var Component = require('choo/component')
var Fish = require('./fish')
var Bubble = require('./bubble')
var Jellyfish = require('./jellyfish')

module.exports = class Background14 extends Component {
  constructor (id) {
    super(id)
    this.jellyfish = new Jellyfish()
    this.fishes = []
    this.bubbles = []
    for (let i = 0; i < 7; i++) this.fishes.push(new Fish(i))
    for (let i = 0; i < 2; i++) this.bubbles.push(new Bubble(i))
  }

  update () {
    return false
  }

  load (element) {
    var whale = element.querySelector('.js-whale')

    element.querySelector('.js-sea').classList.add('is-visible')

    window.requestAnimationFrame(() => {
      whale.addEventListener('transitionend', replay)
      whale.classList.add('in-transition')
    })

    function replay () {
      whale.classList.remove('in-transition')
      window.setTimeout(() => {
        window.requestAnimationFrame(() => {
          whale.classList.add('in-transition')
        })
      }, Math.random() * 5000)
    }
  }

  createElement (opts = {}) {
    return html`
      <div class="Background14 ${opts.size === 'small' ? 'Background14--small' : ''}" id="background-14">
        <div class="Background14-sea js-sea">
          <svg viewBox="0 0 1491 543" class="Background14-whale js-whale">
            <g fill="none" fill-rule="evenodd">
              <path d="M1361.5 84.2a5 5 0 0 0-10-1.2l9.9 2.1v-1" fill="currentColor"/>
              <path d="M1356.4 89.3a5 5 0 0 0 5-4.2l-10-2.1a5 5 0 0 0 5 6.3" fill="currentColor"/>
              <path d="M1472.4 137.5a5 5 0 1 1 0-10.1 5 5 0 0 1 0 10.1m-34.1-11a5 5 0 1 1 0-10.3 5 5 0 0 1 0 10.2m-33.5 7.3a5 5 0 1 1 0-10.2 5 5 0 0 1 0 10.2m-19.8-21a5 5 0 1 1 0-10.2 5 5 0 0 1 0 10.2m-36.1 7.1a5 5 0 1 1 0-10.2 5 5 0 0 1 0 10.2m-18.5-19.5a5 5 0 1 1 0-10.1 5 5 0 0 1 0 10.1m-35.4 7.3a5 5 0 1 1 0-10.1 5 5 0 0 1 0 10.1m-30.6-10.3a5 5 0 1 1 0-10.2 5 5 0 0 1 0 10.2m-45.2-3a5 5 0 1 1 0-10.3 5 5 0 0 1 0 10.2m-7.3 43.3a5 5 0 1 1 0-10.1 5 5 0 0 1 0 10.1m-27.7-31a5 5 0 1 1 0-10.2 5 5 0 0 1 0 10.2m-15.4 39.3a5 5 0 1 1-5.2-8.8 5 5 0 0 1 5.2 8.8m-28.4-23.7a5 5 0 1 1-5.2-8.8 5 5 0 0 1 5.2 8.8m-12.5 39.6a5 5 0 1 1-5.2-8.7 5 5 0 0 1 5.2 8.7m141.3-15.7a5 5 0 1 1 0 10.2 5 5 0 0 1 0-10.2m32.4 7.6a5 5 0 1 1 0 10.1 5 5 0 0 1 0-10.1m34.8-11.3a5 5 0 1 1 0 10.1 5 5 0 0 1 0-10.1m34 11.4a5 5 0 1 1 8.8 5 5 5 0 0 1-8.8-5m115.5-40.2a5 5 0 0 1-8.3-3l-17.6-3.8a5 5 0 0 1-9.7-2.1l-33.6-7.4a5 5 0 0 1-9-2l-46.3-10a5 5 0 1 1-10-2.2l-42.8-9.4a5 5 0 0 1-8-1.8l-6-1.3a127 127 0 0 0-10.9-1.8l-26-3.4a5 5 0 0 1-10-.5V64l-58.5-7.5a5 5 0 0 1-10-.8v-.5L920 22h-1L690.6 11.7 567.9.8A12.5 12.5 0 0 0 554.5 11l-1.8 9.7c-.8 4-3.4 7.3-7 9l-250.4 117c-1 .4-2 1-3 1.8l-106 93.2c-1.9 1.5-2.7 2.5-5 2.9l-6.8 1.7c4.2-1 8.8 0 12 3l37.6 33.5c4.6 4.2 5.7 11 2.6 16.4l6-8.7c1.9-3.6 4-6 8.2-6.5l235.5-27.8c1.4-.2 2.9-.1 4.3.2L598 284.1c1.8.4 3.6.4 5.4 0l65.2-13.5c1-.2 2.1-.3 3.2-.2L922.3 283a12.5 12.5 0 0 1 6.8 22.5l-17.5 13.1a12.5 12.5 0 0 0-3.6 4.3l-76.4 147.7-.7 1.3-34.4 51a12.5 12.5 0 0 0 13.2 19.2l66.4-15.5c2.8-.7 5.4-2.3 7.1-4.6l102.4-133.8 68.3-81.3c2-2.3 3-5.1 3-8v-12.6c-.3-9 8.7-14.4 9.6-14.6 79.6-17.3 148.5-48.9 194.3-89l2.4-2a2 2 0 1 1 2.4 3.4l-2.1 1.8c-32.8 28.7-77.8 53.3-130.5 71.5l36.2-9.1 2.6-1.3c87.6-36.1 108.6-67.9 108.8-68.2a2 2 0 0 1 2.9-.6 2 2 0 0 1 .6 2.8c-.7 1.2-18.6 28.4-90.5 61.1l18.8-4.7 2-1.1c68-31.7 85-57.6 85.2-57.9a2 2 0 0 1 2.9-.6 2 2 0 0 1 .6 2.9c-.6 1-15.3 23.3-71.2 51.8l14.7-3.7 2.3-1.2c53.3-27.6 67.4-49 67.5-49.2a2 2 0 0 1 2.8-.6 2 2 0 0 1 .7 2.8c-.5.8-12.6 19.3-56.3 43.9l15.5-3.9 2-1.1c44.3-24.7 56.3-43 56.4-43.2a2 2 0 0 1 2.9-.7c.4.3.7.8.9 1.3 0 .6 0 1.1-.3 1.6-.4.7-10.8 16.5-46.7 38.3l18.3-4.7 1.7-1c32.8-20.4 42.1-34.7 42.2-34.8a2 2 0 0 1 2.9-.7 2 2 0 0 1 .6 2.9c-.8 1.3-8.8 13.1-34.3 30.3l16.4-4 1.4-1c23.8-16.5 31-27.4 31-27.5a2 2 0 0 1 2.8-.7 2 2 0 0 1 .7 2.9c-.6 1-6.6 9.9-24.4 23.3l17.1-4.3 1.1-.9a98.5 98.5 0 0 0 21.3-20.3 2 2 0 0 1 2.8-.7 2 2 0 0 1 .7 2.9 84 84 0 0 1-15.9 16.5l13.2-3.3 1-.8a86.8 86.8 0 0 0 16.2-16.5 2 2 0 0 1 2.9-.6 2 2 0 0 1 .6 2.8 72 72 0 0 1-11.6 12.8l1.9-.5c4.5-1.1 9-2.5 13.3-4l1-1c7.6-6.9 10.4-11 10.4-11.1a2 2 0 1 1 3.5 2.2c-.3.4-1.8 2.6-5 6.2a168.6 168.6 0 0 0 43-25.9l5.6-4.6c-41.4 5-148.8-20.6-154.9-22-17.6-2.8-28-2-50.5 4.3a58 58 0 0 0-16.1 7.3c-17.6 11.4-60.6 38.2-81.8 41.2h-.4a2.4 2.4 0 0 1-.3-4.9c20.2-2.8 62.6-29.2 79.8-40.4a62.9 62.9 0 0 1 17.5-7.9c23-6.4 34.4-7.4 52.7-4.5h.2c1.3.4 127.3 30.5 160 20.8h1.2l2.4-2c2.8-2.3 4.5-5.9 4.5-9.6v-9.5c0-4-2-7.7-5-10" fill="currentColor" fill-rule="nonzero"/>
              <path d="M1417.7 94.2a5 5 0 1 0-10 1l9 2a5 5 0 0 0 1-3" fill="currentColor"/>
              <path d="M1412.6 99.3a5 5 0 0 0 4.1-2l-9-2a5 5 0 0 0 5 4" fill="currentColor"/>
              <path d="M1460.4 104.6a5 5 0 0 0-10.1 0l9.7 2a5 5 0 0 0 .4-2" fill="currentColor"/>
              <path d="M1455.3 109.6a5 5 0 0 0 4.7-3l-9.7-2a5 5 0 0 0 5 5" fill="currentColor"/>
              <path d="M1486 113.5a5 5 0 0 0-3.4-9 5 5 0 0 0-5 6l3.6.8c1.7.4 3.3 1.1 4.7 2.2" fill="currentColor"/>
              <path d="M1482.6 114.7a5 5 0 0 0 3.3-1.2c-1.4-1-3-1.8-4.7-2.2l-3.6-.8a5 5 0 0 0 5 4.2" fill="currentColor"/>
              <path d="M1189.3 55.7a5 5 0 0 0-10.1-.5l10 1.3v-.8" fill="currentColor"/>
              <path d="M1184.2 60.8a5 5 0 0 0 5-4.3l-10-1.3v.5a5 5 0 0 0 5 5" fill="currentColor"/>
              <path d="M1310.3 69.9a5 5 0 1 0-9.8 2l8.1 1.7a5 5 0 0 0 1.7-3.7" fill="currentColor"/>
              <path d="M1305.2 75a5 5 0 0 0 3.4-1.4l-8-1.8a5 5 0 0 0 4.6 3.2" fill="currentColor"/>
              <path d="M1257.8 64.8a5 5 0 0 0-10.1-.8l10 1.3v-.5" fill="currentColor"/>
              <path d="M1252.7 69.9a5 5 0 0 0 5-4.6l-10-1.3v.8a5 5 0 0 0 5 5" fill="currentColor"/>
              <path d="M205.9 293.4a359.5 359.5 0 0 0-39.5-45L10.2 288.2a13.2 13.2 0 0 0 2.7 26l92.8 4c6.6.4 12 5.6 12.5 12.3l2.5 33c.1 2.4-.3 4.7-1.4 6.8L74 462.5c-3.7 7.3.3 16.2 8.2 18.4l8.8 2.5c5.4 1.6 11.3-.6 14.5-5.3l120.8-178 .5-1-8.1 12c-4.4-6.5-8-11.5-12.7-17.7" fill="currentColor"/>
              <path d="M224 282.8l-37.5-33.5c-3.2-3-7.8-4-12-3l-8.1 2.1c15 14.4 26.7 28.2 39.5 45 4.7 6.2 8.3 11.2 12.7 17.7l8.1-12c3-5.3 2-12.1-2.6-16.3" fill="currentColor"/>
              <path d="M174.5 246.3l-8.1 2.1 8-2.1z" fill="#6FCDE4"/>
              <path d="M830.5 208.1c-1 1-2 2.2-2.7 3.5l-77.2 149.5-.8 1.3L715 414c-6.4 9.5 2.2 22 13.4 19.4l67.2-15.7c2.8-.6 5.4-2.3 7.1-4.6l103.7-135.4 58.4-69.6H830.5z" fill="currentColor"/>
            </g>
          </svg>
          ${this.jellyfish.render()}
          ${this.fishes.map((fish) => fish.render())}
          ${this.bubbles.map((bubble) => bubble.render())}
        </div>
      </div>
    `
  }
}
